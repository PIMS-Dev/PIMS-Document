# 通讯包结构
## 基础包
| 协议头           | 包类型            | 状态码               |
| ---------------- | ----------------- | -------------------- |
| 1byte 必须为0xf8 | 1byte 必须为0x01  | 1byte 在各操作内定义 |

## 基本注册请求包
| 协议头           | 包类型           | UsernameHash | saltPassword | Nonce长度    | Nonce            | PubKey的长度 | PubKey           | EncryptedUserData长度 | EncryptedUserData |
| ---------------- | ---------------- | ------------ | ------------ | ------------ | ---------------- | ------------ | ---------------- | --------------------- | ----------------- |
| 1byte 必须为0xf8 | 1byte 必须为0x02 | 32byte       | 32byte       | 2byte uint16 | 长度为上一项定义 | 2byte uint16 | 长度为上一项定义 | 4byte uint32          | 长度为上一项定义  |

## 邀请注册请求包
| 协议头           | 包类型           | ... |
| ---------------- | ---------------- | --- |
| 1byte 必须为0xf8 | 1byte 必须为0x03 | ... |
TBC

## 用户数据请求包
| 协议头           | 包类型            | UsernameHash |
| ---------------- | ----------------- | ------------ |
| 1byte 必须为0xf8 | 1byte 必须为0x04  | 32byte       |

## 用户数据下发包
| 协议头           | 包类型            | 状态码             | saltPassword | Nonce长度    | Nonce            | EncryptedUserData长度 | EncryptedUserData |
| ---------------- | ----------------- | ------------------ | ------------ | ------------ | ---------------- | --------------------- | ----------------- |
| 1byte 必须为0xf8 | 1byte 必须为0x05  | 1byte 在操作中定义 | 32byte       | 2byte uint16 | 长度为上一项定义 | 4byte uint32          | 长度为上一项定义  |

## 用户公钥请求包
| 协议头           | 包类型            | 请求的项数   | UsernameHash | ...                                  |
| ---------------- | ----------------- | ------------ | ------------ | ------------------------------------ |
| 1byte 必须为0xf8 | 1byte 必须为0x06  | 2byte uint16 | 32byte       | 根据请求的项数决定UsernameHash的个数 |

## 用户公钥下发包
| 协议头           | 包类型            | 状态码             | 请求的项数   | PubKey长度   | PubKey           | ...                                          |
| ---------------- | ----------------- | ------------------ | ------------ | ------------ | ---------------- | -------------------------------------------- |
| 1byte 必须为0xf8 | 1byte 必须为0x07  | 1byte 在操作中定义 | 2byte uint16 | 2byte uint16 | 长度为上一项定义 | 根据请求的项数决定PubKey的个数(长度也要重复) |

## 聊天创建包
| 协议头           | 包类型           | ChatID | ChatPubKey的长度 | ChatPubKey       |
| ---------------- | ---------------- | ------ | ---------------- | ---------------- |
| 1byte 必须为0xf8 | 1byte 必须为0x08 | 32byte | 2byte uint16     | 长度为上一项定义 |

## 聊天邀请包
| 协议头           | 包类型           | 请求的项数   | UsernameHash | EncryptedInviteData长度 | 用户对应的EncryptedInviteData |
| ---------------- | ---------------- | ------------ | ------------ | ----------------------- | ----------------------------- |
| 1byte 必须为0xf8 | 1byte 必须为0x08 | 2byte uint16 | 32byte       | 4byte uint32            | 长度为上一项定义              |